{{define "secrets"}}
<h2>Secrets for {{.AppName}}</h2>

<h3>Create New Secret</h3>
<form action="/applications/{{.AppID}}/secrets/create" method="post">
    <input type="text" name="secretName" placeholder="Secret Name" required>
    <input type="text" name="backend" placeholder="Backend" required>
    <input type="text" name="mountPath" placeholder="Mount Path" required>
    <input type="text" name="secretKey" placeholder="Secret Key" required>
    <input type="text" name="secretValue" placeholder="Secret Value" required>
    <button type="submit">Create Secret</button>
</form>
<br>

{{if .Secrets}}
<table>
    <thead>
        <tr>
            <th>Secret Name</th>
            <th>Backend</th>
            <th>Path</th>
            <th>Tainted</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {{range .Secrets}}
        <tr>
            <td>{{.Name}}</td>
            <td>{{.Backend}}</td>
            <td>{{.Path}}</td>
            <td>{{.Tainted}}</td>
            <td>
                <form action="/applications/{{$.AppID}}/secrets/{{.Name}}/get" method="post" style="display: inline;">
                    <button type="submit">Get Secret</button>
                </form>
                <form action="/applications/{{$.AppID}}/secrets/{{.Name}}/taint" method="post" style="display: inline;">
                    <button type="submit" {{if .Tainted}}disabled{{end}}>Taint</button>
                </form>
                <form action="/applications/{{$.AppID}}/secrets/{{.Name}}/untaint" method="post" style="display: inline;">
                    <button type="submit" {{if not .Tainted}}disabled{{end}}>Untaint</button>
                </form>
                <form action="/applications/{{$.AppID}}/secrets/{{.Name}}/destroy" method="post" style="display: inline;">
                    <button type="submit" onclick="return confirm('Are you sure you want to destroy this secret?')">Destroy</button>
                </form>
            </td>
        </tr>
        {{end}}
    </tbody>
</table>
{{else}}
<p>No secrets found for this application.</p>
{{end}}
<a href="/applications">Back to Applications</a>
{{end}}