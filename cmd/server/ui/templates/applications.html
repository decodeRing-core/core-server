{{define "applications"}}
<h2>Applications</h2>
{{if .IsRoot}}
<form action="/applications/create" method="post">
    <input type="text" name="appName" placeholder="New Application Name" required>
    <button type="submit">Create Application</button>
</form>
<br>
{{end}}
{{if .Applications}}
<table>
    <thead>
        <tr>
            <th>App Name</th>
            <th>App ID</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {{range .Applications}}
        <tr>
            <td>{{.Name}}</td>
            <td>{{.ID}}</td>
            <td>
                <a href="/applications/{{.ID}}/secrets"><button>View Secrets</button></a>
                {{if $.IsRoot}}
                <form action="/applications/{{.ID}}/delete" method="post" style="display: inline;">
                    <button type="submit" onclick="return confirm('Are you sure you want to delete this application?')">Delete</button>
                </form>
                {{end}}
            </td>
        </tr>
        {{end}}
    </tbody>
</table>
{{else}}
<p>No applications registered.</p>
{{end}}
{{end}}